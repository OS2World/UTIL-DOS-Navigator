ftp.001 <Ftp_.pas>

  Одновременно может существовать не более nFtpConn соединений.
К одному хосту может быть и более одного соединения.
Каждое соединение описывается элементом FtpConn.
  Каждый хост описывается элемнтом масива FtpHost. Сервер
подразумевает определённый логин, то есть если к одному
ftp-адресу мы подсоединяемся с двумя разными логинами,
то это будет как бы два разных хоста.
  Пароль и кодировка привязываются к хосту, а в описателе
соединения есть ссылка на хост. Обратной ссылки нет, но
хост содержит счётчик соединений.
  Элементы FtpConn могут быть в одном из трёх состояний:
свободном, осиротевшем и занятом.
  Свободный элемент соответствует отсутствию соединения.
Свободные элементы связаны в список полем Next, голова
списка - FreeFtp, дисциплина стековая. У них обязательно
FtpCli=nil, остальное может содержать мусор.
  Осиротевшие элементы соответствуют "остаточным" соединениям,
то есть тому, кто соединение инициировал, оно уже не нужно,
но какое-то время оно будет поддерживаться на всякий случай.
Осиротевшие элементы связаны в список полем Next, голова
списка - OrphanFtp, дисциплина стековая.
  Занятые элементы соответствуют соединиям, которые сейчас
используются. Они не входят ни в какой список. Программа,
занявшая элемент, отвечает за то, чтобы после использования
вернуть его в один из списков (если в список свободных, то она же
должна закрыть и занулить FtpCli).
  При установлении и освобождении соединения корректируется счётчик
соединений в описателе хоста.
  Сейчас видно два случая занятия элемента: если на FTP открывается
файловая панель, и если открывается ftp-файл.
  Занятие делает GetFtpConn. Сперва она ищет хост или занимает
новый элемент массива хостов. Затем пытается подобрать осиротевший
элемент на том же хосте, для которого нужен элемент. Если
такого нет - берёт свободный элемент. Если свободных нет - берёт
последний осиротевший и закрывает соединение. А если нет ни пустых,
ни осиротевших, то облом.
